<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Technical Description of JCRdb (Jena Clinical Research Database) v1.0 &#8212; Technical Description of JCRdb (Jena Clinical Research Database) v1.0  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b3523f8e" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=039e1c02" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=b3ba4146"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="technical-description-of-jcrdb-jena-clinical-research-database-v1-0">
<h1>Technical Description of JCRdb (Jena Clinical Research Database) v1.0<a class="headerlink" href="#technical-description-of-jcrdb-jena-clinical-research-database-v1-0" title="Permalink to this heading">¶</a></h1>
<section id="motivation">
<h2>1. Motivation:<a class="headerlink" href="#motivation" title="Permalink to this heading">¶</a></h2>
<p>To provide a user-friendly, clean interface for the storage, retrieval, and visualization of multimodal clinical data at the Jena University Hospital.</p>
</section>
<section id="overview">
<h2>2. Overview:<a class="headerlink" href="#overview" title="Permalink to this heading">¶</a></h2>
<p>The research database is specifically engineered for seamless integration into the desktop workspaces at Jena University Hospital. It features a streamlined, intuitive frontend for user interaction, facilitating the storage, retrieval, and visualization of multimodal clinical data. The backend employs a relational database management system optimized for efficient data handling.</p>
<p>Due to stringent local IT infrastructure constraints, driven primarily by the need to adhere to General Data Protection Regulations (GDPR), the database resides within the secure local network of Jena University Hospital. It is encapsulated in a single SQLite file, ensuring ease of management and high-speed access. User authentication is mandatory for database access, and connections are limited to those originating from within the hospital’s local network.</p>
<p>The frontend operates independently from a self-contained folder and requires no installation. To interact with the SQLite database, users must have read and write permissions. Importantly, all data remains securely stored in the backend database, while the frontend serves solely as an access and manipulation tool.</p>
<p>The database is available to a group of staff at the University Hospital of Jena. It is not available to the public. Multiple instances (i.e. database files) can be used to manage different projects independently. The database is designed to be easily extensible, allowing the addition of new data types and functionalities. Data can also be exchanged with other database instances or other systems using a defined HL7 JSON file standard.</p>
<p>The following figure illustrates the principle architecture of the database:</p>
<figure class="align-center" id="id2">
<a class="reference internal image-reference" href="../_images/img_db_scheme_jena.png"><img alt="../_images/img_db_scheme_jena.png" src="../_images/img_db_scheme_jena.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-text">Overview to the database employed at the Jena University Hospital</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="architecture">
<h2>3. Architecture:<a class="headerlink" href="#architecture" title="Permalink to this heading">¶</a></h2>
<p>Database templates and build software are available at: [GitHub](<a class="reference external" href="https://github.com/stebro01/research_database_sqlite_i2b2.git">https://github.com/stebro01/research_database_sqlite_i2b2.git</a>)</p>
<section id="frontend">
<h3>Frontend<a class="headerlink" href="#frontend" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Technology: Developed using the Quasar/Vue.js 3 Framework, with builds available for MacOS, Linux, and Windows.</p></li>
<li><p>User Interface: Intuitive and responsive, custom-built for the fast-paced, demanding environment of clinical research.</p></li>
<li><p>Functionalities: Equipped with data input forms, robust search and query capabilities, and specialized data visualization tools (coming soon) designed for clinical scientists.</p></li>
<li><p>Data Policy: Adheres to a strict data policy ensuring that all data remains local, fortifying user trust and GDPR compliance.</p></li>
</ul>
</section>
<section id="database">
<h3>Database<a class="headerlink" href="#database" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Database Engine: SQLite</p></li>
<li><p>Data Model: Utilizes the i2b2 Common Data Model (CDM) 16 star schema, optimized for the agile storage and retrieval of multimodal clinical data.</p></li>
</ul>
<figure class="align-center" id="id3">
<a class="reference internal image-reference" href="../_images/img_db_scheme.png"><img alt="../_images/img_db_scheme.png" src="../_images/img_db_scheme.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-text">Modified i2b2 Common Data Model (CDM) 16 star schema with additional tables for user management and CQL rules application.</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</section>
</section>
<section id="technical-details">
<h2>4. Technical Details:<a class="headerlink" href="#technical-details" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Section</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Version</p></th>
<th class="head"><p>License</p></th>
<th class="head"><p>Website / Additional Info</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>Frontend</strong></p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>VueJS 3 Framework</p></td>
<td></td>
<td><p>3.0.5</p></td>
<td><p>MIT</p></td>
<td><p><cite>VueJS Official Website &lt;https://vuejs.org/&gt;</cite></p></td>
</tr>
<tr class="row-even"><td><p>Quasar Framework</p></td>
<td></td>
<td><p>2.0.0</p></td>
<td><p>MIT</p></td>
<td><p><cite>Quasar Official Website &lt;https://quasar.dev/&gt;</cite></p></td>
</tr>
<tr class="row-odd"><td><p>Libraries</p></td>
<td><p>crypto-js
fs
sqlite3</p></td>
<td><p>4.1.1
0.0.1
5.1.4</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><strong>Database</strong></p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>SQLite</p></td>
<td></td>
<td><p>3.36.0</p></td>
<td><p>Public</p></td>
<td><p><cite>SQLite Official Website &lt;https://www.sqlite.org/index.html&gt;</cite></p></td>
</tr>
<tr class="row-even"><td><p>Tables</p></td>
<td><p>11 Tables</p></td>
<td></td>
<td></td>
<td><p>(view figure above)</p></td>
</tr>
<tr class="row-odd"><td><p>Views</p></td>
<td><p>3 Views</p></td>
<td></td>
<td></td>
<td><p>cql_concept_list, patient_list, patient_observations</p></td>
</tr>
<tr class="row-even"><td><p>Triggers</p></td>
<td><p>3 Triggers</p></td>
<td></td>
<td></td>
<td><p>delete_concept_cql_lookup, delete_patient_cascade, delete_visite_cascade</p></td>
</tr>
<tr class="row-odd"><td><p>Suggested Editor</p></td>
<td><p>DB Browser for
SQLite</p></td>
<td><p>3.12.2</p></td>
<td><p>Public</p></td>
<td><p><cite>DB Browser for SQLite Official Website &lt;https://sqlitebrowser.org/&gt;</cite></p></td>
</tr>
</tbody>
</table>
</section>
<section id="key-features">
<h2>5. Key Features:<a class="headerlink" href="#key-features" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Features</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Details</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><ol class="arabic simple">
<li><p>UI</p></li>
</ol>
</td>
<td><p>lightweight frontend</p></td>
<td><p>VueJS 3, Quasar Framework</p></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li><p>multiplatform</p></li>
</ul>
</td>
<td><p>Electron Framework</p></td>
<td><p>precompiled versions for
MacOS, Linux, Windows</p></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li><p>adaptable</p></li>
</ul>
</td>
<td><p>Easy customable</p></td>
<td><p>HTML/CSS based design</p></td>
</tr>
<tr class="row-odd"><td><ol class="arabic simple" start="2">
<li><p>Database</p></li>
</ol>
</td>
<td><p>SQLite DB</p></td>
<td><p>predefined tables, views, triggers,
<cite>see Appendix for details</cite></p></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li><p>lightweight</p></li>
</ul>
</td>
<td><p>single file</p></td>
<td><p>no installation required</p></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li><p>fast</p></li>
</ul>
</td>
<td><p>optimized queries</p></td>
<td><p>i2b2 CDM 16 star schema</p></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li><p>secure</p></li>
</ul>
</td>
<td><p>user authentication</p></td>
<td><p>user management is realized via access rights
to the database file, pure offline solution
without internet connection required</p></td>
</tr>
<tr class="row-odd"><td><ol class="arabic simple" start="5">
<li><p>Standardized concepts</p></li>
</ol>
</td>
<td></td>
<td><p>redefined concepts based on LOINC, SNOMED/CT,
ICD10, custom definitions</p></td>
</tr>
<tr class="row-even"><td><ol class="arabic simple" start="4">
<li><p>Data Input</p></li>
</ol>
</td>
<td><p>via UI</p></td>
<td><p>customable input forms</p></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li><p>single observations</p></li>
</ul>
</td>
<td><p>add observations</p></td>
<td><p>available</p></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li><p>set of observations</p></li>
</ul>
</td>
<td><p>via schemes</p></td>
<td><p>predefined sets of Concepts and observations</p></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li><p>meta data</p></li>
</ul>
</td>
<td></td>
<td><p>each observation is linked to a visit and
a patient including additional meta data,
timestamps, and user information
AND is defined by a concept (e.g. LOINC)
defining the type of observation</p></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li><p>CQL rules</p></li>
</ul>
</td>
<td></td>
<td><p>CQL rules can be applied concepts and will
be executed automatically when a new
observation is added, <cite>see Appendix for details</cite></p></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li><p>supported data types</p></li>
</ul>
</td>
<td></td>
<td><p>all data types supported by SQLite
(e.g. text, integer, float, blob)
added support for Images and RAW data</p></td>
</tr>
<tr class="row-even"><td><ol class="arabic simple" start="5">
<li><p>Data Search</p></li>
</ol>
</td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li><p>within the UI</p></li>
</ul>
</td>
<td><p>searching for subject
data and properties</p></td>
<td><p>customable search form with SQLite query
available</p></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li><p>via SQL</p></li>
</ul>
</td>
<td><p>performing complex
search queries and
joints</p></td>
<td><p>SQL queries can be executed directly in the
database using the suggested editor
<cite>DB Browser for SQLite</cite></p></td>
</tr>
<tr class="row-odd"><td><ol class="arabic simple" start="6">
<li><p>Data Export</p></li>
</ol>
</td>
<td><p>via UI
via SQL</p></td>
<td><p>export of data in CSV format
export of data in HL7 JSON format</p></td>
</tr>
<tr class="row-even"><td><ol class="arabic simple" start="7">
<li><p>DB Management</p></li>
</ol>
</td>
<td></td>
<td><p>Multiple functions for database management</p></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li><p>Concepts</p></li>
</ul>
</td>
<td></td>
<td><p>add, edit, delete concepts within the UI
API for adding concepts from snomed/ct</p></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li><p>User and Rules</p></li>
</ul>
</td>
<td></td>
<td><p>add, edit, delete users within the UI</p></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li><p>CQL rules</p></li>
</ul>
</td>
<td></td>
<td><p>add, edit, delete CQL rules within the UI</p></td>
</tr>
</tbody>
</table>
<section id="entering-data-data-types">
<h3>Entering Data / Data Types<a class="headerlink" href="#entering-data-data-types" title="Permalink to this heading">¶</a></h3>
<p>A major focus of this research database application/concept is the collection of different types of data. Therefore, this section will focus on this aspect.</p>
<section id="data-types-and-definition-of-schemes">
<h4>Data Types and definition of schemes<a class="headerlink" href="#data-types-and-definition-of-schemes" title="Permalink to this heading">¶</a></h4>
<p>The data type of a variable is defined by the CONCEPT_CD field in the CONCEPT_DIMENSION table (<cite>please refer to the appendix of this section for further details</cite>). The following principle data types are supported:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Data Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>N</p></td>
<td><p>Coded for numeric data.</p></td>
</tr>
<tr class="row-odd"><td><p>T</p></td>
<td><p>Coded for textual data.</p></td>
</tr>
<tr class="row-even"><td><p>D</p></td>
<td><p>Encoded for date types and follows the YYYY-MM-DD
format.</p></td>
</tr>
<tr class="row-odd"><td><p>R</p></td>
<td><p>Coded for raw data, to accommodate unprocessed or
unformatted information directly from the data source.
This type is used for variable images and other binary
data.</p></td>
</tr>
<tr class="row-even"><td><p>F</p></td>
<td><p>Coded for findings, indicating whether a particular
clinical feature is present, with options such as
‘yes’, ‘no’ and ‘unknown’.</p></td>
</tr>
<tr class="row-odd"><td><p>S</p></td>
<td><p>Coded for choices, often showing answers attached in
the CONCEPT_PATH.</p></td>
</tr>
<tr class="row-even"><td><p>A</p></td>
<td><p>Coded for answers to choices (‘S’), often showing
answers attached in the CONCEPT_PATH</p></td>
</tr>
</tbody>
</table>
<p>The following figures show the definition of a scheme using various data types:</p>
<figure class="align-center" id="id4">
<a class="reference internal image-reference" href="../_images/img_data_input_example01.png"><img alt="../_images/img_data_input_example01.png" src="../_images/img_data_input_example01.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-text">Screenshot from the user interface showing the definition of a schema with different data types.</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id5">
<a class="reference internal image-reference" href="../_images/img_data_input_example02.png"><img alt="../_images/img_data_input_example02.png" src="../_images/img_data_input_example02.png" style="width: 400px;" /></a>
<figcaption>
<p><span class="caption-text">Further details of the example scheme.</span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The different observations are associated with different data types. Note that there are different types of <cite>MoCA</cite>, one representing a <cite>finding</cite> (indicating that the patient has been tested for <cite>MoCA</cite>), the other representing the <cite>numeric value</cite> of the test.</p>
<p>LID indicates a LOINC-ID, which is a unique identifier for a particular LOINC concept.</p>
</div>
</section>
</section>
<section id="scheme-definition">
<h3>Scheme definition<a class="headerlink" href="#scheme-definition" title="Permalink to this heading">¶</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><cite>Schemes</cite> represent a set of observations. Defining a scheme and consequently using the scheme for data input is a fast and efficient way to enter data. However, it is also possible to enter data without defining a scheme. This is useful for one-time data entry or for data that is not part of a scheme.</p>
</div>
<p>The <cite>Schemes</cite> can be managed using the UI in the <cite>Settings / Schemes</cite> tab. Administrative rights are required to manage the schemas.</p>
<p>The scheme definition is stored within the database in the <cite>CODE_LOOKUP</cite> table.</p>
<p>The following image shows the scheme definition of the example scheme from the previous section:</p>
<figure class="align-center" id="id6">
<a class="reference internal image-reference" href="../_images/img_data_input_schemeindb.png"><img alt="../_images/img_data_input_schemeindb.png" src="../_images/img_data_input_schemeindb.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-text">Screenshot created using SQL DB Browser showing the scheme definition in the database.</span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="entering-data-using-a-scheme">
<h3>Entering data using a scheme<a class="headerlink" href="#entering-data-using-a-scheme" title="Permalink to this heading">¶</a></h3>
<p>To <strong>input observations using a scheme</strong>, a <cite>patient</cite> and a <cite>visit</cite> must be selected in the UI. By clicking on the <cite>Add</cite> button, the user can select a scheme from the list of available schemes.</p>
<figure class="align-center" id="id7">
<a class="reference internal image-reference" href="../_images/img_data_input_scheme.png"><img alt="../_images/img_data_input_scheme.png" src="../_images/img_data_input_scheme.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-text">Screenshot from the user interface showing a scheme.</span><a class="headerlink" href="#id7" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>The data is then stored in the database to the <cite>OBSERVATION_FACT</cite> table. The following images shows the data that was entered using the scheme from the previous section:</p>
<figure class="align-center" id="id8">
<a class="reference internal image-reference" href="../_images/img_data_input_db.png"><img alt="../_images/img_data_input_db.png" src="../_images/img_data_input_db.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-text">Screenshots from the user interface display data entered according to the schema outlined in the previous section, as viewed through <cite>SQL DB Browser</cite>.</span><a class="headerlink" href="#id8" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Instead of using the column <cite>OBSERVATION_FACT</cite>, the view <cite>patient_observations</cite> is employed. This view translates <cite>CONCEPT_CD</cite> to <cite>CONCEPT_NAME_CHAR</cite> and <cite>TVAL_CHAR</cite> to <cite>TVAL_RESOLVED</cite>.</p>
</div>
</section>
<section id="concepts">
<h3>Concepts<a class="headerlink" href="#concepts" title="Permalink to this heading">¶</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Further details can be found in the Appendix.</p>
</div>
<p>In our database design, the CONCEPT_DIMENSION plays a key role in defining the nature of observations derived from various sources such as LOINC or Snomed/CT. Each concept is identified by a unique CONCEPT_CD, which serves as a definitive code for the observed data. To further specify the type of data an observation contains, we introduce the VALTYPE_CD field.</p>
<section id="id1">
<h4>Overview<a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h4>
<p>The following table provides an overview of the concepts that have been implemented.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Concept</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>API</p></th>
<th class="head"><p>External Reference</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>LOINC</p></td>
<td><p>Logical Observation Identifiers</p></td>
<td></td>
<td><p>[LOINC Website](<a class="reference external" href="https://loinc.org">https://loinc.org</a>)</p></td>
</tr>
<tr class="row-odd"><td><p>SNOMED-CT</p></td>
<td><p>Systematized Nomenclature of Medicine</p></td>
<td><p>X</p></td>
<td><p>[SNOMED Website](<a class="reference external" href="https://www.snomed.org">https://www.snomed.org</a>)</p></td>
</tr>
<tr class="row-even"><td><p>ICD10</p></td>
<td><p>International Classification of Diseases</p></td>
<td></td>
<td><p>[ICD10 Website](<a class="reference external" href="https://www.who.int/classifications/icd/en/">https://www.who.int/classifications/icd/en/</a>)</p></td>
</tr>
<tr class="row-odd"><td><p>CUSTOM</p></td>
<td><p>Customized Codes</p></td>
<td></td>
<td><p>N/A</p></td>
</tr>
</tbody>
</table>
</section>
<section id="managing-concepts">
<h4>Managing Concepts<a class="headerlink" href="#managing-concepts" title="Permalink to this heading">¶</a></h4>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For SNOMED, we offer an integrated SNOMED-CT API that can be accessed directly from the user interface during concept editing.</p>
<figure class="align-center" id="id9">
<a class="reference internal image-reference" href="../_images/img_db_concept_api.png"><img alt="../_images/img_db_concept_api.png" src="../_images/img_db_concept_api.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-text">When you select <cite>SNOMED</cite> as the <cite>SOURCESYSTEM_CD</cite>, an API query option becomes available, symbol is denoted by a green arrow. This query feature allows you to search for <cite>SNOMED</cite> concepts and obtain the corresponding <cite>CONCEPT_CD</cite> and <cite>CONCEPT_PATH</cite>, or to retrieve information associated with a specific <cite>CONCEPT_CD</cite>.</span><a class="headerlink" href="#id9" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This marks the sole external connection the database currently utilizes. Only information related to concepts will be transmitted. The URLs for this functionality are hardcoded in the corresponding JavaScript file.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">url_full</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;https://browser.ihtsdotools.org/snowstorm/snomed-ct/browser/MAIN/2023-02-28/concepts&#39;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">url_short</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;https://browser.ihtsdotools.org/snowstorm/snomed-ct/MAIN/2023-02-28/concepts&#39;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">url_descriptions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;https://browser.ihtsdotools.org/snowstorm/snomed-ct/browser/MAIN/descriptions&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Concepts are stored with the SQLite database in the table CONCEPT_DIMENSION. The table is created when the database is initialized.</p>
<p>The UI allows concepts to be managed (added, edited, deleted). In addition, concepts can be exported and imported from the UI using a JSON file.</p>
</div>
</section>
<section id="related-concepts">
<h4>Related Concepts<a class="headerlink" href="#related-concepts" title="Permalink to this heading">¶</a></h4>
<p>When using concepts of the VALTYPE_CD = ‘S’ (selection) answers are defined by the hierarchy of the concept in the CONCEPT_PATH.</p>
<p>Sometimes, similar answers should be provided for different concepts, i.e.</p>
<ul class="simple">
<li><p>NIHS Score Item: 4a. Left Arm (LID: 70190-4)</p></li>
<li><p>NIHS Score Item: 4b. Right Arm (LID: 70967-5)</p></li>
</ul>
<p>Therefore we introduced the concept of concept aliases or <cite>related concepts</cite>. This is illustrated in the following figure.</p>
<figure class="align-center" id="id10">
<a class="reference internal image-reference" href="../_images/img_db_concept_related.png"><img alt="../_images/img_db_concept_related.png" src="../_images/img_db_concept_related.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-text">The concept <cite>LID: 70190-4</cite> serves as the primary concept, whereas <cite>LID: 70967-5</cite> functions as an alias. These two are linked through the <cite>RELATED_CONCEPT</cite> column. Consequently, the alias inherits the same set of answers as the primary concept.</span><a class="headerlink" href="#id10" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</section>
</section>
<section id="export-and-import-of-data">
<h3>Export and Import of Data<a class="headerlink" href="#export-and-import-of-data" title="Permalink to this heading">¶</a></h3>
<p>The database supports the export of data in CSV format and HL7 JSON format. The CSV format is a simple text format that can be opened with any text editor or spreadsheet program. The HL7 JSON format is a standardized format for the exchange of clinical data. The database uses the HL7 JSON format to exchange data with other instances of the database or other systems.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In the Appendix you will find exemplary CSV and HL7 JSON files.</p>
</div>
</section>
</section>
<section id="security-and-compliance">
<h2>6. Security and Compliance:<a class="headerlink" href="#security-and-compliance" title="Permalink to this heading">¶</a></h2>
<p>In its intended use within the network of the University Hospital Jena, the database is protected by the following security measures
- the database is only available within the local network of the hospital
- the location of the database is shared only within the research study group
- only authorised users have access to the database</p>
<p>The database is designed to be used in a secure environment. It is not recommended to use the database in an unsecured environment. The database is not designed for use in a public environment.</p>
<p>By default, the research database is designed to work with data that is not considered personal data under the GDPR. However, the database may be used to store personal data. In this case, the user is responsible for compliance with the GDPR. The database is not designed for use in a public environment.</p>
</section>
<section id="integration-extensibility">
<h2>7. Integration &amp; Extensibility:<a class="headerlink" href="#integration-extensibility" title="Permalink to this heading">¶</a></h2>
<p>The UI front-end is a standalone application and can connect to any SQLite database file structured according to the template provided. The database file can be exchanged with other instances of the database or other systems using the HL7 JSON file standard.</p>
<p>There are currently no APIs available for direct interaction with the user interface. However, the database can be accessed directly via SQL queries using the suggested <cite>DB Browser for SQLite</cite> editor: <a class="reference external" href="https://sqlitebrowser.org">https://sqlitebrowser.org</a>.</p>
<section id="integration-der-sqlite-db-in-knime">
<h3>Integration der SQLite DB in KNIME<a class="headerlink" href="#integration-der-sqlite-db-in-knime" title="Permalink to this heading">¶</a></h3>
<p>To analyze the data directly from the database, the SQLite DB can be seamlessly integrated into KNIME 5.1 (<a class="reference external" href="https://www.knime.com">https://www.knime.com</a>).</p>
<p>Below is an example illustrating how to incorporate the data from the SQLite DB into KNIME.</p>
<figure class="align-center" id="id11">
<a class="reference internal image-reference" href="../_images/img_data_integration_knime01.png"><img alt="../_images/img_data_integration_knime01.png" src="../_images/img_data_integration_knime01.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-text">Sample KNIME workspace to connect to the DB and transform the data into a tabular format suitable for further analysis.</span><a class="headerlink" href="#id11" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id12">
<a class="reference internal image-reference" href="../_images/img_data_integration_knime02.png"><img alt="../_images/img_data_integration_knime02.png" src="../_images/img_data_integration_knime02.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-text">Screenshot from the output of a python script node, which is used to transform the data into a tabular format suitable for further analysis.</span><a class="headerlink" href="#id12" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The SQL Statement for the <cite>DB Query Reader</cite> is stated below:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="k">CAST</span><span class="p">(</span><span class="n">NVAL_NUM</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="nb">REAL</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">NVAL_NUM_REAL</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">patient_observations</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The python script to transform the data is provided in the appendix.</p>
</div>
</section>
</section>
<section id="testing-validation">
<h2>8. Testing &amp; Validation:<a class="headerlink" href="#testing-validation" title="Permalink to this heading">¶</a></h2>
<p>Testing Frameworks:</p>
<ul class="simple">
<li><dl class="simple">
<dt>Unit Tests: using the Jest Framework (<a class="reference external" href="https://jestjs.io/">https://jestjs.io/</a>) for testing</dt><dd><ul>
<li><p>data import and export</p></li>
<li><p>CRUD operations on the database</p></li>
<li><p>CQL rules application</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Integration Tests: using the Cypress Framework (<a class="reference external" href="https://www.cypress.io/">https://www.cypress.io/</a>) for testing</dt><dd><ul>
<li><p>UI testing (e.g. data input, data search, data export)</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="conclusion-future-work">
<h2>9. Conclusion &amp; Future Work:<a class="headerlink" href="#conclusion-future-work" title="Permalink to this heading">¶</a></h2>
<p>The Research Database is a simple yet powerful tool for storing all types of clinical data in a single place. It is designed to be easily extensible, allowing new data types and functionalities to be added. Data can also be exchanged with other database instances or other systems using a defined HL7 JSON file standard.</p>
<p>The status as is is a first version of the database. It is already in use at the University Hospital of Jena and will be further developed in the future.</p>
<p><em>The following features are planned for future releases:</em></p>
<ul class="simple">
<li><p>Data Visualisation</p></li>
<li><p>Built-in image and RAW data viewer</p></li>
<li><p>Enhanced security and compliance through database file encryption</p></li>
</ul>
</section>
<section id="acknowledgements">
<h2>10. Acknowledgements:<a class="headerlink" href="#acknowledgements" title="Permalink to this heading">¶</a></h2>
<p>The development of the database was supported by the following institutions
- Department of Neurology, University Hospital Jena
- IMSID - Institute for Medical Statistics, Informatics and Data Science, University Hospital Jena</p>
<p>The following persons contributed to the development of the database
- PD Dr. Stefan Brodoehl
- Anna Schweinar, cand. med.</p>
</section>
<section id="appendix">
<h2>11. Appendix:<a class="headerlink" href="#appendix" title="Permalink to this heading">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="TechnicalDetails_Appendix_Concepts.html">Concepts predefined in the database</a></li>
<li class="toctree-l1"><a class="reference internal" href="TechnicalDetails_Appendix_SQL.html">SQL Statements for creating the Database</a></li>
<li class="toctree-l1"><a class="reference internal" href="TechnicalDetails_Appendix_CQL.html">CQL - Descriptions and example rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="TechnicalDetails_Appendix_KNIME_phyton.html">Python script to convert sqlite data to a KNIME data frame</a></li>
<li class="toctree-l1"><a class="reference internal" href="TechnicalDetails_Appendix_Exports.html">exemplary export / import data in csv and hl7 json format</a><ul>
<li class="toctree-l2"><a class="reference internal" href="TechnicalDetails_Appendix_Exports.html#csv-export-import">CSV export / import</a></li>
<li class="toctree-l2"><a class="reference internal" href="TechnicalDetails_Appendix_Exports.html#hl7-export-import">HL7 export / import</a></li>
</ul>
</li>
</ul>
</div>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Technical Description of JCRdb (Jena Clinical Research Database) v1.0</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, sb.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../_sources/db/TechnicalDetails.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>